#include "ssd1366.h"


char walk1 [] = {
		0x00, 0x00, 0x00, 0x80, 0x80, 0xF0, 0xB0, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x30, 0x0F, 0x1F, 0xFF, 0x1F, 0x3F, 0x40, 0x8F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x30, 0x28, 0x24, 0x03, 0x00, 0x00, 0x00, 0x3F, 0x20, 0x20, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};

char clr1 [] = {
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};

char walk2 [] = {
		0x00, 0x00, 0x00, 0x80, 0x80, 0xF0, 0xB0, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x3E, 0x01, 0x1F, 0xFF, 0xFF, 0x1F, 0x00, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x7F, 0x7F, 0x60, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};

 char tree [] = {
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x30, 0x78, 0xFC, 0xFC, 0x78, 0x30, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x20, 0x1F, 0x1F, 0x20, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};

char clear[] = {
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
};

char home [] = {
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x80, 0x80, 0xE0, 0xF0, 0xFC, 0xFC, 0xF0, 0xE0, 0x80, 0x80, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x40, 0x40, 0x7F, 0x7F, 0x4F, 0x4C, 0x7C, 0x7F, 0x40, 0x40, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};


void task_ssd1306_display_clear(void *pb) 
{


	uint8_t zero[128];
	
	int address = 0xB0;
	for (uint8_t i = 0; i < 8; i++) 
	{
	i2c_write_multi(OLED_CONTROL_BYTE_CMD_SINGLE,address|i,OLED_CONTROL_BYTE_DATA_STREAM,zero);

	}
	vTaskDelete(NULL);

}

void app_main()
{
    char data[3];
    i2c_example_master_init();
	
	oled_init();
	xTaskCreate(&task_ssd1306_display_clear, "task_ssd1306_display_clear",  2048, NULL, 6, NULL); //clear display
	vTaskDelay(100/portTICK_PERIOD_MS);
	data[0] = 0x00;												//lower start column address 0
	data[1] = 0x10;												//upper start column address 0
	data[2] = 0xb0;												//1st page i.e page 0

	i2c_write(OLED_CONTROL_BYTE_CMD_STREAM,data,3);

	int i =0;

	display("Man Walking....");									//display string at page 0
	display_pixel(2,0,32,16,tree);								//display tree at page 2 of upper start column 0
	display_pixel(2,7,32,16,home);								//display home at page 2 of upper start column 7
	while(1)
	{

		for(i =1 ;i<6;i++)
		{

			display_pixel(2,i,32,16,walk1);						//display walk1 at page 2 with increment of upper start column
			ets_delay_us(170000);
			display_pixel(2,i,32,16,clr1);
			i= i+1;
			display_pixel(2,i,32,16,walk2);						//display walk2 at page 2 with increment of upper start column
			ets_delay_us(170000);
			display_pixel(2,i,32,16,clr1);
		}
	}


}

